<html>
  <head>
    <meta charset="UTF-8" />
    <title>Prescription Form</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <style>
      /* Optional custom styles */ #medicationList .form-group { margin-bottom:
      0; }
    </style>

  </head>
  <body>
    {{>navbar4}}
    <h1 style="margin:20px; padding: 20px;">Prescription Upload</h1>
    <form id="prescriptionForm" action="/prescriptionUpload" method="post" style="width:90%; padding-left:15%">
      <div class="form-group">
        <label for="prescriptionNo">Prescription Number:</label>
        <input
          type="number"
          id="prescriptionNo"
          name="prescriptionNo"
          required
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label for="date">Date:</label>
        <input
          type="date"
          id="date"
          name="date"
          required
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label for="notes">Notes:</label>
        <textarea
          id="notes"
          name="notes"
          maxlength="300"
          required
          class="form-control"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="appointmentNo">Appointment Number:</label>
        <input
          type="number"
          id="appointmentNo"
          name="appointmentNo"
          required
          class="form-control"
        />
      </div>

      <div id="medicationList">
        <div id="medication1" class="form-row align-items-center">
          <div class="form-group col-md-4">
            <label for="medicineName1">Medicine Name:</label>
            <input
              type="text"
              id="medicineName1"
              name="medicineName1"
              required
              class="form-control"
            />
          </div>

          <div class="form-group col-md-4">
            <label for="medicineType1">Medicine Type:</label>
            <input
              type="text"
              id="medicineType1"
              name="medicineType1"
              required
              class="form-control"
            />
          </div>

          <div class="form-group col-md-4">
            <label for="expiryDate1">Expiry Date:</label>
            <input
              type="date"
              id="expiryDate1"
              name="expiryDate1"
              required
              class="form-control"
            />
          </div>
        </div>
      </div>

      <button
        type="button"
        onclick="addMedication()"
        class="btn btn-primary btn-success" style="color:black">Add Medication</button>

      <button type="submit" class="btn btn-success btn-warning">Upload Prescription</button>
    </form>

    <script>
      let medicationCount = 1; 
	function addMedication() { 
		const medicineName = document.getElementById( `medicineName${medicationCount}` ); 
		const medicineType = document.getElementById( `medicineType${medicationCount}`); 
		const expiryDate = document.getElementById(`expiryDate${medicationCount}`); 
		if (!medicineName.checkValidity() || !medicineType.checkValidity() ||!expiryDate.checkValidity() ) { 
			alert( "Please fill out the previous medication item before adding a new one." ); 
			return; } 
		const medicationList = document.getElementById("medicationList");
      	medicationCount++; 
		const newMedication = document.createElement("div");      
		newMedication.classList.add("form-row", "align-items-center");
      newMedication.innerHTML = ` 
		<div class="form-group col-md-4"> 
			<label for="medicineName${medicationCount}">Medicine Name:</label> 
			<input type="text" id="medicineName${medicationCount}" name="medicineName${medicationCount}" required class="form-control" />
      	</div> 
		<div class="form-group col-md-4"> 
		<label for="medicineType${medicationCount}">Medicine Type:</label> 
		<input type="text" id="medicineType${medicationCount}" name="medicineType${medicationCount}" required class="form-control" />
      	</div> 	
		<div class="form-group col-md-4"> 
		<label for="expiryDate${medicationCount}">Expiry Date:</label> 
		<input type="date" id="expiryDate${medicationCount}" name="expiryDate${medicationCount}" required class="form-control" /> </div> `;
      	medicationList.appendChild(newMedication); }

    </script>

  </body>
</html>